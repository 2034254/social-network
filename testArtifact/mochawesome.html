<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:7,&quot;tests&quot;:70,&quot;passes&quot;:70,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2023-12-07T18:06:24.653Z&quot;,&quot;end&quot;:&quot;2023-12-07T18:06:32.634Z&quot;,&quot;duration&quot;:7981,&quot;testsRegistered&quot;:70,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;db1fdef6-6879-4ec4-b23b-ce3e456db208&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1184,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbHandler.closeDatabase();\nawait dbHandler.connect();\npopulate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad70c029-ea60-4147-87de-6ef6b72979f4&quot;,&quot;parentUUID&quot;:&quot;db1fdef6-6879-4ec4-b23b-ce3e456db208&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1001,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbHandler.clearDatabase();\nawait dbHandler.closeDatabase();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb0594f0-4f50-4ee8-9fcc-cc06091e4680&quot;,&quot;parentUUID&quot;:&quot;db1fdef6-6879-4ec4-b23b-ce3e456db208&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;title&quot;:&quot;/api/user/signup&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\1_addUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\1_addUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create user&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should create user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:929,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(201)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    if (process.env.ENABLE_SEND_EMAIL === \&quot;true\&quot;) {\n      expect(res.body.message).to.equal(\&quot;Verify your email address\&quot;);\n    } else {\n      expect(res.body.message).to.equal(\&quot;Account created\&quot;);\n    }\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbe0fba8-7003-41d0-94d7-f671ab1fbe4e&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check if documents in collections are created&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup check if documents in collections are created&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:166,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.find({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then((user) =&gt; {\n    expect(user, \&quot;only one user should be created\&quot;).to.have.lengthOf(1);\n    const a = Following.find({ user: user[0]._id });\n    const b = Followers.find({ user: user[0]._id });\n    Promise.all([a, b])\n      .then((documents) =&gt; {\n        const [doc1, doc2] = documents;\n        const userId = user[0]._id.toString();\n        const doc1UserId = doc1[0].user.toString();\n        const doc2UserId = doc2[0].user.toString();\n        expect(\n          doc1,\n          \&quot;one document in Followers should be created\&quot;\n        ).to.have.lengthOf(1);\n        expect(doc1UserId).to.equal(userId);\n        expect(\n          doc2,\n          \&quot;one document in Followers should be created\&quot;\n        ).to.have.lengthOf(1);\n        expect(doc2UserId).to.equal(userId);\n        done();\n      })\n      .catch((err) =&gt; done(err));\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28a05546-36b9-46d0-81b1-3c7cfa3855bf&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username exists&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(409)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Username exists\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41e2a5b8-b35e-4064-9576-92b3ec0a8253&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email exists&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;janedoe\&quot; })\n  .expect(409)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Email exists\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d805f866-ec01-46c6-8319-b9b1fea0d6c6&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;john doe\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5ad4e8b-09f6-4637-bbe6-eb39f9ba2d0f&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;john@doe\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df4b2c0c-9c2d-4b6b-bbc0-dacb98e1c97b&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;janedoe.com\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82feba73-991c-470f-a21f-cc1a8eb863f3&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;janedoe@com\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3aceecb-ac0e-4501-b0a4-baa4eb59d743&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;janedoecom\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43579e75-de3d-45b9-9af8-43514ba6e594&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without firstName&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without firstName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.firstName;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;firstName\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71d78e38-1f17-45a2-81d4-202696428ba1&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without lastName&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without lastName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.lastName;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;lastName\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46175363-5391-4dac-96c9-2a1a6964c2e8&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without username&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without username&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.username;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;username\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94dc8f84-4103-497b-9091-72ccf2a1b3e8&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without email&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.email;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;email\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1844009d-8451-4bee-8302-eafbb5941b77&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without password&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.password;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;password\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fb8e24e-9e0d-4f38-9717-bccba338f50a&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without retypepassword&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without retypepassword&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.retypepassword;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;retypepassword\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e879aacf-3b1b-4e1b-824c-5a1594d7444b&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if firstname is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if firstname is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, firstName: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;firstName\&quot; is not allowed to be empty&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6674fc85-06ea-44a3-936f-cd66352e0f55&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if lastname is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if lastname is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, lastName: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;lastName\&quot; is not allowed to be empty&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d51c45a-3f81-4b8e-8f5d-68856fa5648b&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;username\&quot; is not allowed to be empty&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40c12118-a7f5-40b5-9d94-8cdb84899e55&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;email\&quot; is not allowed to be empty&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cddd457b-603e-4fc7-a85f-5fd451911f35&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if password is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if password is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, password: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;password\&quot; is not allowed to be empty&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45de31e9-c088-4ff4-a526-67b2551b8a33&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if retypepassword is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if retypepassword is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, retypepassword: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;retypepassword\&quot; must be [ref:password]&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06538e06-80e3-4cb6-a449-f12a49ac6b18&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if firstname is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if firstname is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, firstName: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;firstName\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66614e6e-c6ef-4717-aa59-49301174d489&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if lastname is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if lastname is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, lastName: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;lastName\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22b11536-9e73-4ac6-ba73-ceeaa7baa011&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;username\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bf27d36-8580-4345-9c74-1f9965e4d658&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;email\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c8d6ce3-171d-4724-803b-6bc8ab3d0dfd&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if password is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if password is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, password: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;password\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19029763-fdf6-49bf-8177-88d18e329c8d&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if retypepassword is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if retypepassword is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, retypepassword: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;retypepassword\&quot; must be [ref:password]&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ffbc352-cea2-43e4-ab95-9125a38f6953&quot;,&quot;parentUUID&quot;:&quot;a4ea0e61-cf8e-43c7-914f-a985f3dcb12b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cbe0fba8-7003-41d0-94d7-f671ab1fbe4e&quot;,&quot;28a05546-36b9-46d0-81b1-3c7cfa3855bf&quot;,&quot;41e2a5b8-b35e-4064-9576-92b3ec0a8253&quot;,&quot;d805f866-ec01-46c6-8319-b9b1fea0d6c6&quot;,&quot;c5ad4e8b-09f6-4637-bbe6-eb39f9ba2d0f&quot;,&quot;df4b2c0c-9c2d-4b6b-bbc0-dacb98e1c97b&quot;,&quot;82feba73-991c-470f-a21f-cc1a8eb863f3&quot;,&quot;f3aceecb-ac0e-4501-b0a4-baa4eb59d743&quot;,&quot;43579e75-de3d-45b9-9af8-43514ba6e594&quot;,&quot;71d78e38-1f17-45a2-81d4-202696428ba1&quot;,&quot;46175363-5391-4dac-96c9-2a1a6964c2e8&quot;,&quot;94dc8f84-4103-497b-9091-72ccf2a1b3e8&quot;,&quot;1844009d-8451-4bee-8302-eafbb5941b77&quot;,&quot;3fb8e24e-9e0d-4f38-9717-bccba338f50a&quot;,&quot;e879aacf-3b1b-4e1b-824c-5a1594d7444b&quot;,&quot;6674fc85-06ea-44a3-936f-cd66352e0f55&quot;,&quot;2d51c45a-3f81-4b8e-8f5d-68856fa5648b&quot;,&quot;40c12118-a7f5-40b5-9d94-8cdb84899e55&quot;,&quot;cddd457b-603e-4fc7-a85f-5fd451911f35&quot;,&quot;45de31e9-c088-4ff4-a526-67b2551b8a33&quot;,&quot;06538e06-80e3-4cb6-a449-f12a49ac6b18&quot;,&quot;66614e6e-c6ef-4717-aa59-49301174d489&quot;,&quot;22b11536-9e73-4ac6-ba73-ceeaa7baa011&quot;,&quot;0bf27d36-8580-4345-9c74-1f9965e4d658&quot;,&quot;7c8d6ce3-171d-4724-803b-6bc8ab3d0dfd&quot;,&quot;19029763-fdf6-49bf-8177-88d18e329c8d&quot;,&quot;0ffbc352-cea2-43e4-ab95-9125a38f6953&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1436,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;6090e6a0-e391-4d90-ba69-1b3f79bbc527&quot;,&quot;title&quot;:&quot;/api/user/login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\2_loginUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\2_loginUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get jwt if correct credentials are passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should get jwt if correct credentials are passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:384,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ email: user.email, password: user.password })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\&quot;_id\&quot;, \&quot;token\&quot;);\n    expect(res.body.user.token).to.have.string(\&quot;Bearer\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1f1c791-2010-47af-90d3-666b8c39bad8&quot;,&quot;parentUUID&quot;:&quot;6090e6a0-e391-4d90-ba69-1b3f79bbc527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get jwt if wrong credentials is passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should not get jwt if wrong credentials is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ email: \&quot;asdasd\&quot;, password: user.password })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d672e5de-394b-4772-9a09-ca328a78292b&quot;,&quot;parentUUID&quot;:&quot;6090e6a0-e391-4d90-ba69-1b3f79bbc527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get jwt if no email is passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should not get jwt if no email is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ password: user.password })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;email\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c3e101c-e6db-4dcd-9e1c-6e92c6bba2e0&quot;,&quot;parentUUID&quot;:&quot;6090e6a0-e391-4d90-ba69-1b3f79bbc527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get jwt if no password is passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should not get jwt if no password is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ email: user.email })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;password\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c68d91c6-0c81-4f53-b454-ed100a32e62d&quot;,&quot;parentUUID&quot;:&quot;6090e6a0-e391-4d90-ba69-1b3f79bbc527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get jwt if user not activated&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should not get jwt if user not activated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:191,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(1),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ email: user.email, password: user.password })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Account not activated\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e485f765-4638-4f20-bd41-47d7826837e3&quot;,&quot;parentUUID&quot;:&quot;6090e6a0-e391-4d90-ba69-1b3f79bbc527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b1f1c791-2010-47af-90d3-666b8c39bad8&quot;,&quot;d672e5de-394b-4772-9a09-ca328a78292b&quot;,&quot;0c3e101c-e6db-4dcd-9e1c-6e92c6bba2e0&quot;,&quot;c68d91c6-0c81-4f53-b454-ed100a32e62d&quot;,&quot;e485f765-4638-4f20-bd41-47d7826837e3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:670,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;baa75284-1f17-4f6c-aa4d-9293091477f7&quot;,&quot;title&quot;:&quot;/api/user/getUserData&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\3_getUserData.test.js&quot;,&quot;file&quot;:&quot;\\test\\3_getUserData.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting jwt&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData getting jwt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    const token = jwt.sign(\n      {\n        email: user.email,\n        userId: _id,\n        username: user.username,\n      },\n      process.env.JWT_KEY,\n      {\n        expiresIn: \&quot;30m\&quot;,\n      }\n    );\n    tokenJWT = \&quot;Bearer \&quot; + token;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da89c82b-be65-400d-a453-30156a82ac2d&quot;,&quot;parentUUID&quot;:&quot;baa75284-1f17-4f6c-aa4d-9293091477f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return user data if jwt is passed and profilePage parameters is true&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should return user data if jwt is passed and profilePage parameters is true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:242,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, userProfile: false })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\n      \&quot;_id\&quot;,\n      \&quot;firstName\&quot;,\n      \&quot;lastName\&quot;,\n      \&quot;username\&quot;,\n      \&quot;email\&quot;,\n      \&quot;bio\&quot;,\n      \&quot;profilePicture\&quot;,\n      \&quot;followings\&quot;,\n      \&quot;followers\&quot;,\n      \&quot;followingIds\&quot;,\n      \&quot;postLikes\&quot;,\n      \&quot;commentLikes\&quot;,\n      \&quot;commentReplyLikes\&quot;,\n      \&quot;allNotifications\&quot;,\n      \&quot;messagesCount\&quot;,\n      \&quot;notificationsCount\&quot;,\n      \&quot;posts\&quot;,\n      \&quot;postsCount\&quot;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75a44903-0c84-4774-a7ff-b9b214090f38&quot;,&quot;parentUUID&quot;:&quot;baa75284-1f17-4f6c-aa4d-9293091477f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return user data if jwt is passed and userProfile parameters is true&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should return user data if jwt is passed and userProfile parameters is true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: false, userProfile: true })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\n      \&quot;_id\&quot;,\n      \&quot;firstName\&quot;,\n      \&quot;lastName\&quot;,\n      \&quot;username\&quot;,\n      \&quot;profilePicture\&quot;,\n      \&quot;followingIds\&quot;,\n      \&quot;postLikes\&quot;,\n      \&quot;commentLikes\&quot;,\n      \&quot;commentReplyLikes\&quot;,\n      \&quot;allNotifications\&quot;,\n      \&quot;messagesCount\&quot;,\n      \&quot;notificationsCount\&quot;,\n      \&quot;postsCount\&quot;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8839e0d9-595b-4cf1-a082-c3c387d9b777&quot;,&quot;parentUUID&quot;:&quot;baa75284-1f17-4f6c-aa4d-9293091477f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return user data if parameters are not passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should not return user data if parameters are not passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;profilePage\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce68884b-bffd-4ed9-bb58-5bcf11e341c4&quot;,&quot;parentUUID&quot;:&quot;baa75284-1f17-4f6c-aa4d-9293091477f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return user data if profilePage is not boolean&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should not return user data if profilePage is not boolean&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: \&quot;asd\&quot;, userProfile: \&quot;asd\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;profilePage\&quot; must be a boolean&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52d80ad8-0046-49c2-b3bb-ae58cae28a63&quot;,&quot;parentUUID&quot;:&quot;baa75284-1f17-4f6c-aa4d-9293091477f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return user data if userProfile is not boolean&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should not return user data if userProfile is not boolean&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, userProfile: \&quot;asd\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;userProfile\&quot; must be a boolean&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af10351b-c29f-4765-a1a6-f8149e6f6012&quot;,&quot;parentUUID&quot;:&quot;baa75284-1f17-4f6c-aa4d-9293091477f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return user data if jwt is not passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should not return user data if jwt is not passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .send({ initialFetch: true })\n  .expect(401)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Invalid token\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e545a39-0583-4a7e-9010-cf45116c0d99&quot;,&quot;parentUUID&quot;:&quot;baa75284-1f17-4f6c-aa4d-9293091477f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da89c82b-be65-400d-a453-30156a82ac2d&quot;,&quot;75a44903-0c84-4774-a7ff-b9b214090f38&quot;,&quot;8839e0d9-595b-4cf1-a082-c3c387d9b777&quot;,&quot;ce68884b-bffd-4ed9-bb58-5bcf11e341c4&quot;,&quot;52d80ad8-0046-49c2-b3bb-ae58cae28a63&quot;,&quot;af10351b-c29f-4765-a1a6-f8149e6f6012&quot;,&quot;6e545a39-0583-4a7e-9010-cf45116c0d99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:495,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;50296088-3ad1-4e07-8c29-3ebc51b551c7&quot;,&quot;title&quot;:&quot;/api/user/getNewUsers&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\4_getNewUsers.test.js&quot;,&quot;file&quot;:&quot;\\test\\4_getNewUsers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting _id&quot;,&quot;fullTitle&quot;:&quot;/api/user/getNewUsers getting _id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    userId = _id;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;443ac894-6934-423b-b1f5-73513858107d&quot;,&quot;parentUUID&quot;:&quot;50296088-3ad1-4e07-8c29-3ebc51b551c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return new users&quot;,&quot;fullTitle&quot;:&quot;/api/user/getNewUsers should return new users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getNewUsers\&quot;)\n  .send({ initialFetch: true })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;usersCount\&quot;, \&quot;users\&quot;);\n    expect(res.body.users).to.be.an(\&quot;array\&quot;);\n    expect(res.body.users).to.have.lengthOf(2);\n    expect(res.body).to.have.nested.property(\&quot;users[0]._id\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].date\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].profilePicture\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].username\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40f72d54-58e9-4c35-8d70-e4be59d470d4&quot;,&quot;parentUUID&quot;:&quot;50296088-3ad1-4e07-8c29-3ebc51b551c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require lastId if initialFetch is false&quot;,&quot;fullTitle&quot;:&quot;/api/user/getNewUsers should require lastId if initialFetch is false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getNewUsers\&quot;)\n  .send({ initialFetch: false })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;lastId\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27e70b88-08d2-4eb4-ba67-e440cb7d0370&quot;,&quot;parentUUID&quot;:&quot;50296088-3ad1-4e07-8c29-3ebc51b551c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return user after first one&quot;,&quot;fullTitle&quot;:&quot;/api/user/getNewUsers should return user after first one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:80,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getNewUsers\&quot;)\n  .send({ initialFetch: false, lastId: userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;users\&quot;);\n    expect(res.body.users).to.be.an(\&quot;array\&quot;);\n    expect(res.body.users).to.have.lengthOf(1);\n    expect(res.body).to.have.nested.property(\&quot;users[0]._id\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].date\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].profilePicture\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].username\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;255a4f0f-1213-4ff5-84b5-9ad3f6bf8d82&quot;,&quot;parentUUID&quot;:&quot;50296088-3ad1-4e07-8c29-3ebc51b551c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;443ac894-6934-423b-b1f5-73513858107d&quot;,&quot;40f72d54-58e9-4c35-8d70-e4be59d470d4&quot;,&quot;27e70b88-08d2-4eb4-ba67-e440cb7d0370&quot;,&quot;255a4f0f-1213-4ff5-84b5-9ad3f6bf8d82&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:245,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;047a37b6-b6b9-4e79-87ac-0dd33aa149d8&quot;,&quot;title&quot;:&quot;/api/user/getUserProfileData&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\5_getUserProfileData.test.js&quot;,&quot;file&quot;:&quot;\\test\\5_getUserProfileData.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting jwt&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData getting jwt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    const token = jwt.sign(\n      {\n        email: user.email,\n        userId: _id,\n        username: user.username,\n      },\n      process.env.JWT_KEY,\n      {\n        expiresIn: \&quot;30m\&quot;,\n      }\n    );\n    tokenJWT = \&quot;Bearer \&quot; + token;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4fe8a42-7e7b-48f8-909b-b5c7a58b2845&quot;,&quot;parentUUID&quot;:&quot;047a37b6-b6b9-4e79-87ac-0dd33aa149d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data if jwt is passed and profilePage parameters is true&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should return data if jwt is passed and profilePage parameters is true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:248,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(1),\n};\nrequest(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, username: user.username })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\n      \&quot;_id\&quot;,\n      \&quot;bio\&quot;,\n      \&quot;firstName\&quot;,\n      \&quot;followers\&quot;,\n      \&quot;followings\&quot;,\n      \&quot;lastName\&quot;,\n      \&quot;posts\&quot;,\n      \&quot;postsCount\&quot;,\n      \&quot;profilePicture\&quot;,\n      \&quot;username\&quot;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc714857-2864-48d7-99f2-8734a2dab0ae&quot;,&quot;parentUUID&quot;:&quot;047a37b6-b6b9-4e79-87ac-0dd33aa149d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return if user requests its profile&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should return if user requests its profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, username: user.username })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\&quot;loggedInUser\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4afe1db-827d-4f9d-ad3c-f47be73ccde2&quot;,&quot;parentUUID&quot;:&quot;047a37b6-b6b9-4e79-87ac-0dd33aa149d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return if jwt not passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not return if jwt not passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .send({ profilePage: true, username: user.username })\n  .expect(401)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Invalid token\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68657923-ce6b-4a11-abda-216d356395fe&quot;,&quot;parentUUID&quot;:&quot;047a37b6-b6b9-4e79-87ac-0dd33aa149d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return if username not passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not return if username not passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;username\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31d5f364-e5e6-47e9-bbc7-3a7d1e7e1f07&quot;,&quot;parentUUID&quot;:&quot;047a37b6-b6b9-4e79-87ac-0dd33aa149d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return if username not valid&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not return if username not valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, username: \&quot;123123\&quot; })\n  .expect(404)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;User not found\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db9be6e8-d064-4164-9167-2468fa653495&quot;,&quot;parentUUID&quot;:&quot;047a37b6-b6b9-4e79-87ac-0dd33aa149d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e4fe8a42-7e7b-48f8-909b-b5c7a58b2845&quot;,&quot;bc714857-2864-48d7-99f2-8734a2dab0ae&quot;,&quot;e4afe1db-827d-4f9d-ad3c-f47be73ccde2&quot;,&quot;68657923-ce6b-4a11-abda-216d356395fe&quot;,&quot;31d5f364-e5e6-47e9-bbc7-3a7d1e7e1f07&quot;,&quot;db9be6e8-d064-4164-9167-2468fa653495&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:419,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;title&quot;:&quot;/api/user/getUserProfileData&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\6_followUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\6_followUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting jwt&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData getting jwt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:160,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    const token = jwt.sign(\n      {\n        email: user.email,\n        userId: _id,\n        username: user.username,\n      },\n      process.env.JWT_KEY,\n      {\n        expiresIn: \&quot;30m\&quot;,\n      }\n    );\n    userId1 = _id;\n    tokenJWT = \&quot;Bearer \&quot; + token;\n    User.findOne({ username: getUser(1).username }).then(({ _id }) =&gt; {\n      userId = _id;\n      done();\n    });\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9574ac92-7b21-4cdc-b37e-e5dd5376cfd4&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should follow&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should follow&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:272,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/followUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;userId\&quot;, \&quot;action\&quot;);\n    expect(res.body.action).to.equal(\&quot;followed\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b084ac3-0cd1-43a9-bfe1-50c60aa57790&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not follow itself&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not follow itself&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/followUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId1 })\n  .expect(403)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Failed to follow\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;436b268b-f449-4776-91e5-35a3630caa3f&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should modify right documents when followed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should modify right documents when followed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:334,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const room = await ChatRoom.find();\nexpect(room).to.have.lengthOf(1);\nexpect(room[0].members).to.have.members([userId, userId1]);\nexpect(room[0].messages).to.equal(0);\nconst docF = await Following.findOne({ user: userId1 });\nexpect(docF.following).to.have.lengthOf(1);\nexpect(docF.following[0].user.toString()).to.have.equal(userId.toString());\nconst docN = await Notification.findOne({ receiver: userId });\nexpect(docN.sender.toString()).to.equal(userId1.toString());\nexpect(docN.receiver.toString()).to.equal(userId.toString());\nexpect(docN.type).to.equal(\&quot;follow\&quot;);\nconst docFo = await Followers.findOne({ user: userId });\nexpect(docFo.followers).to.have.lengthOf(1);\nexpect(docFo.followers[0].user.toString()).to.have.equal(\n  userId1.toString()\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d317dbf-53f8-4e34-9669-956baa7a61d3&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followers of user 1&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should get followers of user 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:157,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getUserProfileFollowers\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.users[0].followers).to.have.lengthOf(1);\n    expect(res.body.users[0].followers[0].user.username).to.equal(\n      user.username\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff23fc3d-2154-49be-b28d-1bcbd2221f54&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followings of user 1&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should get followings of user 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getUserProfileFollowings\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.users[0].following).to.have.lengthOf(0);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba593933-5f7f-41ab-87af-7ca5dfb19c80&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followers of user 2&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should get followers of user 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:81,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getUserProfileFollowers\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId1 })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.users[0].followers).to.have.lengthOf(0);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;011cde67-96bc-4500-ae64-11d703848832&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followings of user 2&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should get followings of user 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:164,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(1),\n};\nrequest(app)\n  .post(\&quot;/api/user/getUserProfileFollowings\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId1 })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.users[0].following).to.have.lengthOf(1);\n    expect(res.body.users[0].following[0].user.username).to.equal(\n      user.username\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;511d1391-12f7-44d6-9a60-141cc6d48127&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should unfollow&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should unfollow&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:243,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/followUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;userId\&quot;, \&quot;action\&quot;);\n    expect(res.body.action).to.equal(\&quot;unfollowed\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9427d7c3-25e2-4e26-887a-444c12aa2fd9&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should modify right documents when unfollowd&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should modify right documents when unfollowd&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:170,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const docF = await Following.findOne({ user: userId1 });\nexpect(docF.following).to.have.lengthOf(0);\nconst docFo = await Followers.findOne({ user: userId });\nexpect(docFo.followers).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a7b207c-db6a-4ed5-aac9-ee66de5cb838&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not follow non existing user&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not follow non existing user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/followUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: fakeId })\n  .expect(404)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;User not found\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6683c3dd-d460-48be-b008-63034f8d31c9&quot;,&quot;parentUUID&quot;:&quot;fc9cc432-e71e-463f-a604-9a9a92de10df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9574ac92-7b21-4cdc-b37e-e5dd5376cfd4&quot;,&quot;2b084ac3-0cd1-43a9-bfe1-50c60aa57790&quot;,&quot;436b268b-f449-4776-91e5-35a3630caa3f&quot;,&quot;9d317dbf-53f8-4e34-9669-956baa7a61d3&quot;,&quot;ff23fc3d-2154-49be-b28d-1bcbd2221f54&quot;,&quot;ba593933-5f7f-41ab-87af-7ca5dfb19c80&quot;,&quot;011cde67-96bc-4500-ae64-11d703848832&quot;,&quot;511d1391-12f7-44d6-9a60-141cc6d48127&quot;,&quot;9427d7c3-25e2-4e26-887a-444c12aa2fd9&quot;,&quot;1a7b207c-db6a-4ed5-aac9-ee66de5cb838&quot;,&quot;6683c3dd-d460-48be-b008-63034f8d31c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1819,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;title&quot;:&quot;/api/user/updateUser&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\7_updateUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\7_updateUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting jwt&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser getting jwt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    const token = jwt.sign(\n      {\n        email: user.email,\n        userId: _id,\n        username: user.username,\n      },\n      process.env.JWT_KEY,\n      {\n        expiresIn: \&quot;30m\&quot;,\n      }\n    );\n    userId = _id;\n    tokenJWT = \&quot;Bearer \&quot; + token;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9952571-f564-45fa-8bc1-9346031e79da&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:179,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;user\&quot;, \&quot;token\&quot;);\n    expect(res.body.user).to.have.all.keys(\n      \&quot;_id\&quot;,\n      \&quot;firstName\&quot;,\n      \&quot;lastName\&quot;,\n      \&quot;username\&quot;,\n      \&quot;email\&quot;,\n      \&quot;bio\&quot;\n    );\n    expect(res.body.user.firstName).to.equal(user.firstName);\n    expect(res.body.user.lastName).to.equal(user.lastName);\n    expect(res.body.user.username).to.equal(user.username);\n    expect(res.body.user.email).to.equal(user.email);\n    expect(res.body.user.bio).to.equal(user.bio);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ac2b584-2ca8-4bc3-966a-d1f06f59c74e&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if email exists&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if email exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: getUser(1).email,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(409)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Email exists\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9686b618-c06e-4627-a911-f72b5be5a8fc&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if username exists&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if username exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: getUser(1).username,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(409)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Username exists\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a12f8f7-f7c3-4bd3-94bd-175c196ea23a&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if username is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if username is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bob ross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e0ee5d7-7733-4c24-8edb-bdbb56478af1&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if email is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if email is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobrossbob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cf68f36-6fdb-483a-b27e-e6cd3395e417&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if firstName is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if firstName is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;B o b\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d346724-ca20-4485-850a-2933d65054e5&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if lastName is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if lastName is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;R os s\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9d8e218-86ec-446d-9e5f-0f1c6101673d&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if bio is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if bio is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;a\&quot;.repeat(300),\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;bio\&quot; length must be less than or equal to 250 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ad65633-ba95-49d2-afc5-bd1335739467&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have not updated user with previous tests&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should have not updated user with previous tests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nUser.findById(userId).then(\n  ({ firstName, lastName, username, email, bio }) =&gt; {\n    expect(firstName).to.equal(user.firstName);\n    expect(lastName).to.equal(user.lastName);\n    expect(username).to.equal(user.username);\n    expect(email).to.equal(user.email);\n    expect(bio).to.equal(user.bio);\n    done();\n  }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;115c6c9f-c735-4764-a753-8528d6a152af&quot;,&quot;parentUUID&quot;:&quot;f217dccf-b76d-41d9-ac19-04169bbf1226&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9952571-f564-45fa-8bc1-9346031e79da&quot;,&quot;4ac2b584-2ca8-4bc3-966a-d1f06f59c74e&quot;,&quot;9686b618-c06e-4627-a911-f72b5be5a8fc&quot;,&quot;4a12f8f7-f7c3-4bd3-94bd-175c196ea23a&quot;,&quot;8e0ee5d7-7733-4c24-8edb-bdbb56478af1&quot;,&quot;2cf68f36-6fdb-483a-b27e-e6cd3395e417&quot;,&quot;1d346724-ca20-4485-850a-2933d65054e5&quot;,&quot;e9d8e218-86ec-446d-9e5f-0f1c6101673d&quot;,&quot;2ad65633-ba95-49d2-afc5-bd1335739467&quot;,&quot;115c6c9f-c735-4764-a753-8528d6a152af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:522,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;./testArtifact&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;./testArtifact&quot;,&quot;reportTitle&quot;:&quot;social-network&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;testArtifact\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\testArtifact\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\testArtifact\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>