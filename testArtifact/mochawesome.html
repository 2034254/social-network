<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:7,&quot;tests&quot;:70,&quot;passes&quot;:70,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2023-12-07T20:10:28.698Z&quot;,&quot;end&quot;:&quot;2023-12-07T20:10:36.517Z&quot;,&quot;duration&quot;:7819,&quot;testsRegistered&quot;:70,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;2cc594cd-bbcf-4ce3-af17-1ea6adbfdd80&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1154,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbHandler.closeDatabase();\nawait dbHandler.connect();\npopulate();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93072c61-7bd8-40e5-905e-f64cf70d9e53&quot;,&quot;parentUUID&quot;:&quot;2cc594cd-bbcf-4ce3-af17-1ea6adbfdd80&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:937,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbHandler.clearDatabase();\nawait dbHandler.closeDatabase();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c316ab3d-5253-4bb7-8e0d-86b85ee30a8b&quot;,&quot;parentUUID&quot;:&quot;2cc594cd-bbcf-4ce3-af17-1ea6adbfdd80&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;title&quot;:&quot;/api/user/signup&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\1_addUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\1_addUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create user&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should create user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1007,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(201)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    if (process.env.ENABLE_SEND_EMAIL === \&quot;true\&quot;) {\n      expect(res.body.message).to.equal(\&quot;Verify your email address\&quot;);\n    } else {\n      expect(res.body.message).to.equal(\&quot;Account created\&quot;);\n    }\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d7cae2e-c8fb-44ce-8172-7bb6bde96c52&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check if documents in collections are created&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup check if documents in collections are created&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:155,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.find({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then((user) =&gt; {\n    expect(user, \&quot;only one user should be created\&quot;).to.have.lengthOf(1);\n    const a = Following.find({ user: user[0]._id });\n    const b = Followers.find({ user: user[0]._id });\n    Promise.all([a, b])\n      .then((documents) =&gt; {\n        const [doc1, doc2] = documents;\n        const userId = user[0]._id.toString();\n        const doc1UserId = doc1[0].user.toString();\n        const doc2UserId = doc2[0].user.toString();\n        expect(\n          doc1,\n          \&quot;one document in Followers should be created\&quot;\n        ).to.have.lengthOf(1);\n        expect(doc1UserId).to.equal(userId);\n        expect(\n          doc2,\n          \&quot;one document in Followers should be created\&quot;\n        ).to.have.lengthOf(1);\n        expect(doc2UserId).to.equal(userId);\n        done();\n      })\n      .catch((err) =&gt; done(err));\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23bf0d1e-d4a1-4756-881a-a1b96f9a5726&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username exists&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(409)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Username exists\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b2aefca-a1df-4742-96c7-4e796a5cf7f6&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email exists&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;janedoe\&quot; })\n  .expect(409)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Email exists\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11d2c94f-11cf-482e-801a-f58da1982774&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;john doe\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4abe395c-808a-41a2-b230-eb310c26d036&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;john@doe\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ffd6c86-bf73-4c17-84ed-88d0e4fc7159&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;janedoe.com\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ac86348-1cc1-4f67-b196-c4b40d32eb20&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;janedoe@com\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;607dddb6-d276-4a12-be96-86dbd47ac921&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;janedoecom\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;353b41d4-1d60-4c0b-af4c-c78fc27d240c&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without firstName&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without firstName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.firstName;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;firstName\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ba86755-cc87-48d0-9675-7bd7b1f6d4cd&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without lastName&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without lastName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.lastName;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;lastName\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9516669c-bc8d-41df-9fac-e95c6fc66016&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without username&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without username&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.username;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;username\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58f89228-60d9-475d-bd4e-050259adaab2&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without email&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.email;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;email\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39b2cb14-393f-4e46-b5c1-0409451420dc&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without password&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.password;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;password\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07e5fe60-011c-4e11-95fb-8b9da6cb01c6&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user without retypepassword&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user without retypepassword&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\ndelete user.retypepassword;\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send(user)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;retypepassword\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb0e2e3a-6b07-4566-be40-1c9fff13d652&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if firstname is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if firstname is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, firstName: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;firstName\&quot; is not allowed to be empty&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2457cfcc-c0b2-4834-8231-f4849d04aecb&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if lastname is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if lastname is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, lastName: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;lastName\&quot; is not allowed to be empty&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1dce0988-63f7-4c98-ba9d-1a556268e83d&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;username\&quot; is not allowed to be empty&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed926e4c-78ff-4265-b319-8811eca4c5c8&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;email\&quot; is not allowed to be empty&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;138648e4-2def-435e-900c-a80c124bb0ba&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if password is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if password is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, password: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;password\&quot; is not allowed to be empty&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;240c573d-5c12-4898-821e-110cf1b2b871&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if retypepassword is empty&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if retypepassword is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, retypepassword: \&quot;\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;retypepassword\&quot; must be [ref:password]&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2430cdef-9fa7-4870-8240-cd5c8d4b255a&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if firstname is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if firstname is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, firstName: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;firstName\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8f37684-a1f0-407c-ad71-0fa3744db8ff&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if lastname is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if lastname is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, lastName: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;lastName\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7ccde05-f40d-473c-9ed4-cdf883a68a97&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if username is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if username is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, username: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;username\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;333662db-4ae1-4bc0-b6dd-cfa9860e2bbb&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if email is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if email is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, email: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;email\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bff1b992-2bf1-405f-a082-1bf584c35e10&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if password is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if password is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, password: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;password\&quot; length must be less than or equal to 30 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2774608e-b6fc-44ab-ab4b-3c52ea397a34&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create user if retypepassword is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/signup should not create user if retypepassword is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/signup\&quot;)\n  .send({ ...user, retypepassword: \&quot;a\&quot;.repeat(31) })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.property(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;retypepassword\&quot; must be [ref:password]&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce4ff44c-586a-478d-8b85-d706ed5001a5&quot;,&quot;parentUUID&quot;:&quot;b3052519-7b49-4000-a4db-ad0baa5a9e68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9d7cae2e-c8fb-44ce-8172-7bb6bde96c52&quot;,&quot;23bf0d1e-d4a1-4756-881a-a1b96f9a5726&quot;,&quot;9b2aefca-a1df-4742-96c7-4e796a5cf7f6&quot;,&quot;11d2c94f-11cf-482e-801a-f58da1982774&quot;,&quot;4abe395c-808a-41a2-b230-eb310c26d036&quot;,&quot;5ffd6c86-bf73-4c17-84ed-88d0e4fc7159&quot;,&quot;1ac86348-1cc1-4f67-b196-c4b40d32eb20&quot;,&quot;607dddb6-d276-4a12-be96-86dbd47ac921&quot;,&quot;353b41d4-1d60-4c0b-af4c-c78fc27d240c&quot;,&quot;6ba86755-cc87-48d0-9675-7bd7b1f6d4cd&quot;,&quot;9516669c-bc8d-41df-9fac-e95c6fc66016&quot;,&quot;58f89228-60d9-475d-bd4e-050259adaab2&quot;,&quot;39b2cb14-393f-4e46-b5c1-0409451420dc&quot;,&quot;07e5fe60-011c-4e11-95fb-8b9da6cb01c6&quot;,&quot;eb0e2e3a-6b07-4566-be40-1c9fff13d652&quot;,&quot;2457cfcc-c0b2-4834-8231-f4849d04aecb&quot;,&quot;1dce0988-63f7-4c98-ba9d-1a556268e83d&quot;,&quot;ed926e4c-78ff-4265-b319-8811eca4c5c8&quot;,&quot;138648e4-2def-435e-900c-a80c124bb0ba&quot;,&quot;240c573d-5c12-4898-821e-110cf1b2b871&quot;,&quot;2430cdef-9fa7-4870-8240-cd5c8d4b255a&quot;,&quot;d8f37684-a1f0-407c-ad71-0fa3744db8ff&quot;,&quot;f7ccde05-f40d-473c-9ed4-cdf883a68a97&quot;,&quot;333662db-4ae1-4bc0-b6dd-cfa9860e2bbb&quot;,&quot;bff1b992-2bf1-405f-a082-1bf584c35e10&quot;,&quot;2774608e-b6fc-44ab-ab4b-3c52ea397a34&quot;,&quot;ce4ff44c-586a-478d-8b85-d706ed5001a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1518,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;54e6c334-0c6e-40f8-99e4-fae3626beb2a&quot;,&quot;title&quot;:&quot;/api/user/login&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\2_loginUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\2_loginUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get jwt if correct credentials are passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should get jwt if correct credentials are passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:324,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ email: user.email, password: user.password })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\&quot;_id\&quot;, \&quot;token\&quot;);\n    expect(res.body.user.token).to.have.string(\&quot;Bearer\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4f55615-284b-453c-b28a-b952d5a4aa5f&quot;,&quot;parentUUID&quot;:&quot;54e6c334-0c6e-40f8-99e4-fae3626beb2a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get jwt if wrong credentials is passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should not get jwt if wrong credentials is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ email: \&quot;asdasd\&quot;, password: user.password })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b782e386-6000-4e07-8d11-31790e0ef58e&quot;,&quot;parentUUID&quot;:&quot;54e6c334-0c6e-40f8-99e4-fae3626beb2a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get jwt if no email is passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should not get jwt if no email is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ password: user.password })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;email\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e0a14f3-e5c5-4307-840a-e597b8dd3969&quot;,&quot;parentUUID&quot;:&quot;54e6c334-0c6e-40f8-99e4-fae3626beb2a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get jwt if no password is passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should not get jwt if no password is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ email: user.email })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;password\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcb94ea9-8d35-4211-a201-830f3a3f390c&quot;,&quot;parentUUID&quot;:&quot;54e6c334-0c6e-40f8-99e4-fae3626beb2a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get jwt if user not activated&quot;,&quot;fullTitle&quot;:&quot;/api/user/login should not get jwt if user not activated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:157,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(1),\n};\nrequest(app)\n  .post(\&quot;/api/user/login\&quot;)\n  .send({ email: user.email, password: user.password })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Account not activated\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;803f0d6a-8005-47ba-85c7-d91d988aa3bb&quot;,&quot;parentUUID&quot;:&quot;54e6c334-0c6e-40f8-99e4-fae3626beb2a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e4f55615-284b-453c-b28a-b952d5a4aa5f&quot;,&quot;b782e386-6000-4e07-8d11-31790e0ef58e&quot;,&quot;6e0a14f3-e5c5-4307-840a-e597b8dd3969&quot;,&quot;dcb94ea9-8d35-4211-a201-830f3a3f390c&quot;,&quot;803f0d6a-8005-47ba-85c7-d91d988aa3bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:565,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;7891361a-9341-49c9-a14e-baa2bdcc1bb5&quot;,&quot;title&quot;:&quot;/api/user/getUserData&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\3_getUserData.test.js&quot;,&quot;file&quot;:&quot;\\test\\3_getUserData.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting jwt&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData getting jwt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    const token = jwt.sign(\n      {\n        email: user.email,\n        userId: _id,\n        username: user.username,\n      },\n      process.env.JWT_KEY,\n      {\n        expiresIn: \&quot;30m\&quot;,\n      }\n    );\n    tokenJWT = \&quot;Bearer \&quot; + token;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cbce6ba-be19-4d31-87bf-c635b00a5f28&quot;,&quot;parentUUID&quot;:&quot;7891361a-9341-49c9-a14e-baa2bdcc1bb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return user data if jwt is passed and profilePage parameters is true&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should return user data if jwt is passed and profilePage parameters is true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:242,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, userProfile: false })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\n      \&quot;_id\&quot;,\n      \&quot;firstName\&quot;,\n      \&quot;lastName\&quot;,\n      \&quot;username\&quot;,\n      \&quot;email\&quot;,\n      \&quot;bio\&quot;,\n      \&quot;profilePicture\&quot;,\n      \&quot;followings\&quot;,\n      \&quot;followers\&quot;,\n      \&quot;followingIds\&quot;,\n      \&quot;postLikes\&quot;,\n      \&quot;commentLikes\&quot;,\n      \&quot;commentReplyLikes\&quot;,\n      \&quot;allNotifications\&quot;,\n      \&quot;messagesCount\&quot;,\n      \&quot;notificationsCount\&quot;,\n      \&quot;posts\&quot;,\n      \&quot;postsCount\&quot;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28ee1204-47b4-4ae5-9b46-764f1c2092a4&quot;,&quot;parentUUID&quot;:&quot;7891361a-9341-49c9-a14e-baa2bdcc1bb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return user data if jwt is passed and userProfile parameters is true&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should return user data if jwt is passed and userProfile parameters is true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:157,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: false, userProfile: true })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\n      \&quot;_id\&quot;,\n      \&quot;firstName\&quot;,\n      \&quot;lastName\&quot;,\n      \&quot;username\&quot;,\n      \&quot;profilePicture\&quot;,\n      \&quot;followingIds\&quot;,\n      \&quot;postLikes\&quot;,\n      \&quot;commentLikes\&quot;,\n      \&quot;commentReplyLikes\&quot;,\n      \&quot;allNotifications\&quot;,\n      \&quot;messagesCount\&quot;,\n      \&quot;notificationsCount\&quot;,\n      \&quot;postsCount\&quot;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d04f595c-41fd-4b39-bbea-2f5d7e77e33b&quot;,&quot;parentUUID&quot;:&quot;7891361a-9341-49c9-a14e-baa2bdcc1bb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return user data if parameters are not passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should not return user data if parameters are not passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;profilePage\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20791f06-1b63-400c-b6c3-589dd01fda8f&quot;,&quot;parentUUID&quot;:&quot;7891361a-9341-49c9-a14e-baa2bdcc1bb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return user data if profilePage is not boolean&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should not return user data if profilePage is not boolean&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: \&quot;asd\&quot;, userProfile: \&quot;asd\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;profilePage\&quot; must be a boolean&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa468e47-10b2-4287-b09b-27753fd9036f&quot;,&quot;parentUUID&quot;:&quot;7891361a-9341-49c9-a14e-baa2bdcc1bb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return user data if userProfile is not boolean&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should not return user data if userProfile is not boolean&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, userProfile: \&quot;asd\&quot; })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;userProfile\&quot; must be a boolean&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53b2a23d-a9ec-4c85-aefb-3b5d636c4dab&quot;,&quot;parentUUID&quot;:&quot;7891361a-9341-49c9-a14e-baa2bdcc1bb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return user data if jwt is not passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserData should not return user data if jwt is not passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getUserData\&quot;)\n  .send({ initialFetch: true })\n  .expect(401)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Invalid token\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3fdac0d-ed21-4af3-a105-d744c7760473&quot;,&quot;parentUUID&quot;:&quot;7891361a-9341-49c9-a14e-baa2bdcc1bb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cbce6ba-be19-4d31-87bf-c635b00a5f28&quot;,&quot;28ee1204-47b4-4ae5-9b46-764f1c2092a4&quot;,&quot;d04f595c-41fd-4b39-bbea-2f5d7e77e33b&quot;,&quot;20791f06-1b63-400c-b6c3-589dd01fda8f&quot;,&quot;fa468e47-10b2-4287-b09b-27753fd9036f&quot;,&quot;53b2a23d-a9ec-4c85-aefb-3b5d636c4dab&quot;,&quot;a3fdac0d-ed21-4af3-a105-d744c7760473&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:498,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;75dcf6a0-a1a7-45ec-9d57-baaff3fce586&quot;,&quot;title&quot;:&quot;/api/user/getNewUsers&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\4_getNewUsers.test.js&quot;,&quot;file&quot;:&quot;\\test\\4_getNewUsers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting _id&quot;,&quot;fullTitle&quot;:&quot;/api/user/getNewUsers getting _id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:76,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    userId = _id;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa60b3d5-b589-429a-ab90-70d5bc62acd7&quot;,&quot;parentUUID&quot;:&quot;75dcf6a0-a1a7-45ec-9d57-baaff3fce586&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return new users&quot;,&quot;fullTitle&quot;:&quot;/api/user/getNewUsers should return new users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getNewUsers\&quot;)\n  .send({ initialFetch: true })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;usersCount\&quot;, \&quot;users\&quot;);\n    expect(res.body.users).to.be.an(\&quot;array\&quot;);\n    expect(res.body.users).to.have.lengthOf(2);\n    expect(res.body).to.have.nested.property(\&quot;users[0]._id\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].date\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].profilePicture\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].username\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebd01808-0f73-4a0a-8bd2-be8f36481c8a&quot;,&quot;parentUUID&quot;:&quot;75dcf6a0-a1a7-45ec-9d57-baaff3fce586&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should require lastId if initialFetch is false&quot;,&quot;fullTitle&quot;:&quot;/api/user/getNewUsers should require lastId if initialFetch is false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getNewUsers\&quot;)\n  .send({ initialFetch: false })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;lastId\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06529476-c57d-476b-a0a0-86e5c22214dc&quot;,&quot;parentUUID&quot;:&quot;75dcf6a0-a1a7-45ec-9d57-baaff3fce586&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return user after first one&quot;,&quot;fullTitle&quot;:&quot;/api/user/getNewUsers should return user after first one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getNewUsers\&quot;)\n  .send({ initialFetch: false, lastId: userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;users\&quot;);\n    expect(res.body.users).to.be.an(\&quot;array\&quot;);\n    expect(res.body.users).to.have.lengthOf(1);\n    expect(res.body).to.have.nested.property(\&quot;users[0]._id\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].date\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].profilePicture\&quot;);\n    expect(res.body).to.have.nested.property(\&quot;users[0].username\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;840773fe-272b-4fb6-b723-66c3437c5d6e&quot;,&quot;parentUUID&quot;:&quot;75dcf6a0-a1a7-45ec-9d57-baaff3fce586&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa60b3d5-b589-429a-ab90-70d5bc62acd7&quot;,&quot;ebd01808-0f73-4a0a-8bd2-be8f36481c8a&quot;,&quot;06529476-c57d-476b-a0a0-86e5c22214dc&quot;,&quot;840773fe-272b-4fb6-b723-66c3437c5d6e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:251,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;762466a1-79e5-486a-88f0-c96275ab5be7&quot;,&quot;title&quot;:&quot;/api/user/getUserProfileData&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\5_getUserProfileData.test.js&quot;,&quot;file&quot;:&quot;\\test\\5_getUserProfileData.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting jwt&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData getting jwt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:80,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    const token = jwt.sign(\n      {\n        email: user.email,\n        userId: _id,\n        username: user.username,\n      },\n      process.env.JWT_KEY,\n      {\n        expiresIn: \&quot;30m\&quot;,\n      }\n    );\n    tokenJWT = \&quot;Bearer \&quot; + token;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26bc6b64-a950-4d4b-9937-52b19a22c993&quot;,&quot;parentUUID&quot;:&quot;762466a1-79e5-486a-88f0-c96275ab5be7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data if jwt is passed and profilePage parameters is true&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should return data if jwt is passed and profilePage parameters is true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:295,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(1),\n};\nrequest(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, username: user.username })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\n      \&quot;_id\&quot;,\n      \&quot;bio\&quot;,\n      \&quot;firstName\&quot;,\n      \&quot;followers\&quot;,\n      \&quot;followings\&quot;,\n      \&quot;lastName\&quot;,\n      \&quot;posts\&quot;,\n      \&quot;postsCount\&quot;,\n      \&quot;profilePicture\&quot;,\n      \&quot;username\&quot;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a22d355c-0af6-449c-b714-1a39557c829b&quot;,&quot;parentUUID&quot;:&quot;762466a1-79e5-486a-88f0-c96275ab5be7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return if user requests its profile&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should return if user requests its profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, username: user.username })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.user).to.have.all.keys(\&quot;loggedInUser\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3008575-9c3d-4444-9b16-101fb0700d4b&quot;,&quot;parentUUID&quot;:&quot;762466a1-79e5-486a-88f0-c96275ab5be7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return if jwt not passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not return if jwt not passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .send({ profilePage: true, username: user.username })\n  .expect(401)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Invalid token\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;defd52e1-c07e-4cd0-8ab9-543d1cd1a84f&quot;,&quot;parentUUID&quot;:&quot;762466a1-79e5-486a-88f0-c96275ab5be7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return if username not passed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not return if username not passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(&#x27;\&quot;username\&quot; is required&#x27;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fb038d2-9367-4560-b745-5c686e7793c3&quot;,&quot;parentUUID&quot;:&quot;762466a1-79e5-486a-88f0-c96275ab5be7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not return if username not valid&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not return if username not valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/getProfilePageData\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ profilePage: true, username: \&quot;123123\&quot; })\n  .expect(404)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;User not found\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db1a65cf-1af5-4b86-a388-e9609a164d0f&quot;,&quot;parentUUID&quot;:&quot;762466a1-79e5-486a-88f0-c96275ab5be7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;26bc6b64-a950-4d4b-9937-52b19a22c993&quot;,&quot;a22d355c-0af6-449c-b714-1a39557c829b&quot;,&quot;c3008575-9c3d-4444-9b16-101fb0700d4b&quot;,&quot;defd52e1-c07e-4cd0-8ab9-543d1cd1a84f&quot;,&quot;4fb038d2-9367-4560-b745-5c686e7793c3&quot;,&quot;db1a65cf-1af5-4b86-a388-e9609a164d0f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:469,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;title&quot;:&quot;/api/user/getUserProfileData&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\6_followUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\6_followUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting jwt&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData getting jwt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:153,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    const token = jwt.sign(\n      {\n        email: user.email,\n        userId: _id,\n        username: user.username,\n      },\n      process.env.JWT_KEY,\n      {\n        expiresIn: \&quot;30m\&quot;,\n      }\n    );\n    userId1 = _id;\n    tokenJWT = \&quot;Bearer \&quot; + token;\n    User.findOne({ username: getUser(1).username }).then(({ _id }) =&gt; {\n      userId = _id;\n      done();\n    });\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8cd9b8f0-b13d-46f1-aef8-bb3f01901e93&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should follow&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should follow&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:251,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/followUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;userId\&quot;, \&quot;action\&quot;);\n    expect(res.body.action).to.equal(\&quot;followed\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94bfaf31-5284-455e-8b37-c4c47d7b1dfb&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not follow itself&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not follow itself&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/followUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId1 })\n  .expect(403)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Failed to follow\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;179550ff-1cd2-48a1-82bb-b47bac82a6b5&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should modify right documents when followed&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should modify right documents when followed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:296,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const room = await ChatRoom.find();\nexpect(room).to.have.lengthOf(1);\nexpect(room[0].members).to.have.members([userId, userId1]);\nexpect(room[0].messages).to.equal(0);\nconst docF = await Following.findOne({ user: userId1 });\nexpect(docF.following).to.have.lengthOf(1);\nexpect(docF.following[0].user.toString()).to.have.equal(userId.toString());\nconst docN = await Notification.findOne({ receiver: userId });\nexpect(docN.sender.toString()).to.equal(userId1.toString());\nexpect(docN.receiver.toString()).to.equal(userId.toString());\nexpect(docN.type).to.equal(\&quot;follow\&quot;);\nconst docFo = await Followers.findOne({ user: userId });\nexpect(docFo.followers).to.have.lengthOf(1);\nexpect(docFo.followers[0].user.toString()).to.have.equal(\n  userId1.toString()\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e3654a2-0a82-463d-b2c8-589ef063bc92&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followers of user 1&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should get followers of user 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:156,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getUserProfileFollowers\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.users[0].followers).to.have.lengthOf(1);\n    expect(res.body.users[0].followers[0].user.username).to.equal(\n      user.username\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd020eea-4988-4793-8428-bbb531e13dfd&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followings of user 1&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should get followings of user 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getUserProfileFollowings\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.users[0].following).to.have.lengthOf(0);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30f35888-1b46-470a-8f41-68a095f02b3a&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followers of user 2&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should get followers of user 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nrequest(app)\n  .post(\&quot;/api/user/getUserProfileFollowers\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId1 })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.users[0].followers).to.have.lengthOf(0);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97881d90-bf6e-4c48-8e0f-540dfdce139d&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get followings of user 2&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should get followings of user 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:158,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(1),\n};\nrequest(app)\n  .post(\&quot;/api/user/getUserProfileFollowings\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: userId1 })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body.users[0].following).to.have.lengthOf(1);\n    expect(res.body.users[0].following[0].user.username).to.equal(\n      user.username\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8247530-b5dc-488b-b8f3-abc249c32841&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should unfollow&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should unfollow&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:238,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/followUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;userId\&quot;, \&quot;action\&quot;);\n    expect(res.body.action).to.equal(\&quot;unfollowed\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17bec590-6067-45a8-93c2-8f95c80fb730&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should modify right documents when unfollowd&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should modify right documents when unfollowd&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:147,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const docF = await Following.findOne({ user: userId1 });\nexpect(docF.following).to.have.lengthOf(0);\nconst docFo = await Followers.findOne({ user: userId });\nexpect(docFo.followers).to.have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee5453dc-3034-40d7-9d76-b761c3cdce12&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not follow non existing user&quot;,&quot;fullTitle&quot;:&quot;/api/user/getUserProfileData should not follow non existing user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:80,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(\&quot;/api/user/followUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({ userId: fakeId })\n  .expect(404)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;User not found\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf8ccdb9-a62d-4d92-8c7c-71a828513241&quot;,&quot;parentUUID&quot;:&quot;0b11f516-c5ec-46b7-b27d-7974635a71e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8cd9b8f0-b13d-46f1-aef8-bb3f01901e93&quot;,&quot;94bfaf31-5284-455e-8b37-c4c47d7b1dfb&quot;,&quot;179550ff-1cd2-48a1-82bb-b47bac82a6b5&quot;,&quot;4e3654a2-0a82-463d-b2c8-589ef063bc92&quot;,&quot;bd020eea-4988-4793-8428-bbb531e13dfd&quot;,&quot;30f35888-1b46-470a-8f41-68a095f02b3a&quot;,&quot;97881d90-bf6e-4c48-8e0f-540dfdce139d&quot;,&quot;a8247530-b5dc-488b-b8f3-abc249c32841&quot;,&quot;17bec590-6067-45a8-93c2-8f95c80fb730&quot;,&quot;ee5453dc-3034-40d7-9d76-b761c3cdce12&quot;,&quot;bf8ccdb9-a62d-4d92-8c7c-71a828513241&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1722,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;title&quot;:&quot;/api/user/updateUser&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\test\\7_updateUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\7_updateUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;getting jwt&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser getting jwt&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:76,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  ...getUser(0),\n};\nUser.findOne({ username: user.username })\n  .select(\&quot;_id\&quot;)\n  .then(({ _id }) =&gt; {\n    const token = jwt.sign(\n      {\n        email: user.email,\n        userId: _id,\n        username: user.username,\n      },\n      process.env.JWT_KEY,\n      {\n        expiresIn: \&quot;30m\&quot;,\n      }\n    );\n    userId = _id;\n    tokenJWT = \&quot;Bearer \&quot; + token;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ec53a3a-bf8e-43c9-88ee-1ba3c5b50738&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:170,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(200)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;user\&quot;, \&quot;token\&quot;);\n    expect(res.body.user).to.have.all.keys(\n      \&quot;_id\&quot;,\n      \&quot;firstName\&quot;,\n      \&quot;lastName\&quot;,\n      \&quot;username\&quot;,\n      \&quot;email\&quot;,\n      \&quot;bio\&quot;\n    );\n    expect(res.body.user.firstName).to.equal(user.firstName);\n    expect(res.body.user.lastName).to.equal(user.lastName);\n    expect(res.body.user.username).to.equal(user.username);\n    expect(res.body.user.email).to.equal(user.email);\n    expect(res.body.user.bio).to.equal(user.bio);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3407da61-7096-4a5b-b745-e8b94c138763&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if email exists&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if email exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: getUser(1).email,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(409)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Email exists\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca42c497-813c-46ba-94d7-10158bda44fa&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if username exists&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if username exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:94,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: getUser(1).username,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(409)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\&quot;Username exists\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3adb25d-4b12-4a0c-891e-69125d5e3f2a&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if username is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if username is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bob ross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8e4cca6-753f-40e4-bbe7-6af485d95eaa&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if email is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if email is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobrossbob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc947026-4078-4166-acd8-d592fa61600a&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if firstName is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if firstName is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;B o b\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a118b486-06be-4a75-a44d-627e22626336&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if lastName is invalid&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if lastName is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;R os s\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1efbce7f-de0a-4aaf-a8a4-f9b956e858bc&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user if bio is too long&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should not update user if bio is too long&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;a\&quot;.repeat(300),\n};\nrequest(app)\n  .post(\&quot;/api/user/updateUser\&quot;)\n  .set(\&quot;Authorization\&quot;, tokenJWT)\n  .send({\n    ...user,\n  })\n  .expect(400)\n  .then((res) =&gt; {\n    expect(res.body).to.have.all.keys(\&quot;message\&quot;);\n    expect(res.body.message).to.equal(\n      &#x27;\&quot;bio\&quot; length must be less than or equal to 250 characters long&#x27;\n    );\n    done();\n  })\n  .catch((err) =&gt; done(err));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29b19f08-0961-4308-b0c9-3c89b5d4a882&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have not updated user with previous tests&quot;,&quot;fullTitle&quot;:&quot;/api/user/updateUser should have not updated user with previous tests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:76,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = {\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Ross\&quot;,\n  username: \&quot;bobross\&quot;,\n  email: \&quot;bobross@bob.com\&quot;,\n  bio: \&quot;\&quot;,\n};\nUser.findById(userId).then(\n  ({ firstName, lastName, username, email, bio }) =&gt; {\n    expect(firstName).to.equal(user.firstName);\n    expect(lastName).to.equal(user.lastName);\n    expect(username).to.equal(user.username);\n    expect(email).to.equal(user.email);\n    expect(bio).to.equal(user.bio);\n    done();\n  }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ad439d3-395d-4120-ad3e-593872878b6d&quot;,&quot;parentUUID&quot;:&quot;fed1b8b9-18e6-48d2-ab4a-f6aa96cb7c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ec53a3a-bf8e-43c9-88ee-1ba3c5b50738&quot;,&quot;3407da61-7096-4a5b-b745-e8b94c138763&quot;,&quot;ca42c497-813c-46ba-94d7-10158bda44fa&quot;,&quot;f3adb25d-4b12-4a0c-891e-69125d5e3f2a&quot;,&quot;c8e4cca6-753f-40e4-bbe7-6af485d95eaa&quot;,&quot;fc947026-4078-4166-acd8-d592fa61600a&quot;,&quot;a118b486-06be-4a75-a44d-627e22626336&quot;,&quot;1efbce7f-de0a-4aaf-a8a4-f9b956e858bc&quot;,&quot;29b19f08-0961-4308-b0c9-3c89b5d4a882&quot;,&quot;5ad439d3-395d-4120-ad3e-593872878b6d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:530,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;./testArtifact&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;./testArtifact&quot;,&quot;reportTitle&quot;:&quot;social-network&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;testArtifact\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\testArtifact\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\adm1\\Documents\\Semester5\\Transactional Application 2\\Final-Project\\social-network\\testArtifact\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>