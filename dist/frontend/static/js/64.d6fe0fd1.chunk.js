"use strict";(self.webpackChunksocial_network_client=self.webpackChunksocial_network_client||[]).push([[64],{75549:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var n=r(72791),s=r(78417),o=r(66826),a=r(91460),i=r(72447),l=r(40834),u=r(62836),c=r(76915),p=r(85168),h=r(72898);class d extends n.Component{constructor(e){super(e),this.componentDidMount=()=>{document.title="Register | social-network"},this.handleChange=e=>{const{name:t,value:r}=e.target,{user:n}=this.state;this.setState({user:{...n,[t]:r}})},this.handleRetypePassword=e=>{const{name:t,value:r}=e.target,{user:n}=this.state;r!==this.state.user.password?this.setState({user:{...n,[t]:r},retTypePasswordError:!0}):this.setState({user:{...n,[t]:r},retTypePasswordError:!1})},this.state={user:{firstName:"",lastName:"",username:"",email:"",password:"",retypepassword:""},submitted:!1,retTypePasswordError:!1},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(e){e.preventDefault(),this.setState({submitted:!0});const{user:t}=this.state,{dispatch:r}=this.props;t.firstName&&t.lastName&&t.username&&t.password&&t.retypepassword&&!this.state.retTypePasswordError&&r(c.h.register(t))}render(){const{registering:e,alert:t}=this.props,{user:r,submitted:n,retTypePasswordError:o}=this.state;return(0,h.jsxs)("div",{className:"form-centered",children:[(0,h.jsx)(a.Z,{size:"large",attached:!0,header:"social-network",content:"Fill out the form below to sign-up for a new account. (Do not use real credentials)"}),(0,h.jsxs)(i.Z,{className:"attached fluid segment",size:"large",success:"success"===t.type,error:"error"===t.type,name:"form",onSubmit:this.handleSubmit,children:[(0,h.jsxs)(i.Z.Group,{widths:"equal",children:[(0,h.jsx)(i.Z.Input,{required:!0,label:"First Name",placeholder:"First Name",type:"text",name:"firstName",value:r.firstName,error:!(!n||r.firstName),onChange:this.handleChange}),(0,h.jsx)(i.Z.Input,{required:!0,label:"Last Name",placeholder:"Last Name",type:"text",name:"lastName",value:r.lastName,error:!(!n||r.lastName),onChange:this.handleChange})]}),(0,h.jsxs)(i.Z.Group,{widths:"equal",children:[(0,h.jsx)(i.Z.Input,{required:!0,autoCapitalize:"none",label:"Username",placeholder:"Username",type:"text",name:"username",value:r.username,error:!(!n||r.username),onChange:this.handleChange}),(0,h.jsx)(i.Z.Input,{required:!0,label:"Email",placeholder:"Email",type:"email",name:"email",value:r.email,error:!(!n||r.email),onChange:this.handleChange})]}),(0,h.jsx)(i.Z.Input,{required:!0,label:"Password",placeholder:"Password",type:"password",name:"password",value:r.password,error:!(!n||r.password),onChange:this.handleChange}),(0,h.jsx)(i.Z.Input,{required:!0,label:"Re-type password",placeholder:"Re-type password",type:"password",name:"retypepassword",value:r.retypepassword,error:!(!n||r.retypepassword)||o,onChange:this.handleRetypePassword}),(0,h.jsx)(l.Z,{size:"large",content:"Sign up",icon:"signup",fluid:!0,primary:!0,disabled:!(!o&&""!==r.retypepassword&&""!==r.password&&""!==r.email&&""!==r.firstName&&""!==r.lastName&&""!==r.username),loading:!!e}),t.type?(0,h.jsx)(p.Z,{alert:t}):null]}),(0,h.jsxs)(a.Z,{size:"large",attached:"bottom",warning:!0,children:[(0,h.jsx)(u.Z,{name:"help"}),"Already signed up?\xa0",(0,h.jsx)(s.Z,{to:"/login",children:"Login here"}),"\xa0instead."]})]})}}const f=(0,o.$j)((e=>({registering:e.registration.registering,alert:e.alert})))(d)},76915:(e,t,r)=>{r.d(t,{h:()=>p});var n=r(51935),s=r(73685);const o={login:function(e,t){const r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})};return fetch("/api/user/login",r).then(i).then((e=>(localStorage.setItem("user",JSON.stringify({token:e.user.token})),e.user)))},logout:a,sendVerificationEmail:function(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})};return fetch("/api/user/sendVerificationEmail/",t).then(i)},sendforgotPasswordEmail:function(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})};return fetch("/api/user/sendforgotPasswordEmail/",t).then(i)},register:function(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/user/signup/",t).then(i)},getUserData:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({...e})};return fetch("/api/user/getUserData",t).then(i).then((e=>e))},resetPassword:function(e){const t={method:"POST",headers:{Authorization:"Bearer "+e.jwt,"Content-Type":"application/json"},body:JSON.stringify({...e})};return fetch("/api/user/passwordreset",t).then(l).then((e=>e))},updateUser:function(e){delete e.isDisabled;const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/user/updateUser",t).then(i).then((e=>(localStorage.setItem("user",JSON.stringify({token:e.token})),e)))},followUser:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({userId:e})};return fetch("/api/user/followUser",t).then(i).then((e=>e))},getUserProfileData:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({username:e.trim(),profilePage:!0})};return fetch("/api/user/getProfilePageData",t).then(i).then((e=>e))},getPosts:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({...e})};return fetch("/api/user/getPosts",t).then(i).then((e=>e))},getUserProfileFollowers:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({userId:e})};return fetch("/api/user/getUserProfileFollowers",t).then(i).then((e=>e))},getUserProfileFollowings:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({userId:e})};return fetch("/api/user/getUserProfileFollowings",t).then(i).then((e=>e))},getNewUsers:function(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})};return fetch("/api/user/getNewUsers",t).then(i).then((e=>e))}};function a(){localStorage.removeItem("user")}function i(e){return e.text().then((t=>{const r=t&&JSON.parse(t);if(!e.ok){401===e.status&&(a(),window.location.reload(!0));const t=r&&r.message||e.statusText;return Promise.reject(t)}return r}))}function l(e){return e.text().then((t=>{const r=t&&JSON.parse(t);if(!e.ok){e.status;const t=r&&r.message||e.statusText;return Promise.reject(t)}return r}))}var u=r(44102),c=r(74325);const p={login:function(e,t){return r=>{var s;r((s={email:e},{type:n.A.LOGIN_REQUEST,user:s})),o.login(e,t).then((e=>{r(function(e){return{type:n.A.LOGIN_SUCCESS,user:e}}(e.token)),r({type:n.A.GETUSER_SUCCESS,user:e}),c.m.push("/")}),(e=>{r(function(e){return{type:n.A.LOGIN_FAILURE,error:e}}(e.toString())),r(u.I.error(e.toString()))}))}},logout:function(){return o.logout(),e=>{e({type:n.A.LOGOUT})}},register:function(e){return t=>{t(function(e){return{type:n.A.REGISTER_REQUEST,user:e}}(e)),o.register(e).then((e=>{t(function(e){return{type:n.A.REGISTER_SUCCESS,user:e}}()),c.m.push("/login"),t(u.I.success(e.message))}),(e=>{t(function(e){return{type:n.A.REGISTER_FAILURE,error:e}}(e.toString())),t(u.I.error(e.toString()))}))}},sendVerificationEmail:function(e){return t=>{o.sendVerificationEmail(e).then((e=>{t(u.I.success(e.message))}),(e=>{t(u.I.error(e))}))}},getUserData:function(e){return t=>{t({type:n.A.GETUSER_REQUEST}),o.getUserData(e).then((e=>{var r;e.user.posts&&e.user.posts.forEach((e=>t({type:s.q.INIT_COMMENT,postId:e._id}))),t((r=e.user,{type:n.A.GETUSER_SUCCESS,user:r}))}),(e=>{t(function(e){return{type:n.A.GETUSER_FAILURE,error:e}}(e.toString())),t(u.I.error(e.toString()))}))}},getUserProfileFollowers:function(e){return t=>{o.getUserProfileFollowers(e).then((e=>{var r;t((r=e.users[0].followers,{type:n.A.GET_USER_PROFILE_FOLLOWERS,users:r}))}),(e=>{console.log(e)}))}},getUserProfileFollowings:function(e){return t=>{o.getUserProfileFollowings(e).then((e=>{var r;t((r=e.users[0].following,{type:n.A.GET_USER_PROFILE_FOLLOWINGS,users:r}))}),(e=>{console.log(e)}))}},getFollowers:function(e){return t=>{o.getUserProfileFollowers(e).then((e=>{var r;t((r=e.users[0].followers,{type:n.A.GET_USER_FOLLOWERS,users:r}))}),(e=>{console.log(e)}))}},getPosts:function(e){return t=>{o.getPosts(e).then((e=>{var r;e.posts.forEach((e=>t({type:s.q.INIT_COMMENT,postId:e._id}))),t((r=e.posts,{type:n.A.GET_POSTS,posts:r}))}),(e=>{t(u.I.error(e))}))}},getUserPosts:function(e){return t=>{o.getPosts(e).then((e=>{var r;e.posts.forEach((e=>t({type:s.q.INIT_COMMENT,postId:e._id}))),t((r=e.posts,{type:n.A.GET_USER_PROFILE_POSTS,posts:r}))}),(e=>{t(u.I.error(e))}))}},getFollowings:function(e){return t=>{o.getUserProfileFollowings(e).then((e=>{var r;t((r=e.users[0].following,{type:n.A.GET_USER_FOLLOWINGS,users:r}))}),(e=>{console.log(e)}))}},updateUserData:function(e){return t=>{t({type:n.A.USER_UPDATE_REQUEST}),o.updateUser(e).then((e=>{t(function(e){return{type:n.A.USER_UPDATE_SUCCESS,user:e}}(e.user))}),(e=>{t(function(e){return{type:n.A.USER_UPDATE_FAILURE,error:e}}(e.toString()))}))}},followUser:function(e){return t=>{o.followUser(e).then((e=>{"followed"===e.action?t({type:n.A.FOLLOW_USER,user:e}):t({type:n.A.UNFOLLOW_USER,user:e})}),(e=>{console.log(e)}))}},sendforgotPasswordEmail:function(e){return t=>{o.sendforgotPasswordEmail(e).then((e=>{t(u.I.success(e.message))}),(e=>{t(u.I.error(e))}))}},getUserProfileData:function(e){return t=>{t({type:n.A.GET_USERPROFILE_DATA_REQUEST}),o.getUserProfileData(e).then((e=>{if(e.user.loggedInUser)return c.m.push("/profile");var r;document.title="@"+e.user.username+" | social-network",t((r=e,{type:n.A.GET_USERPROFILE_DATA,user:r})),e.user.posts&&e.user.posts.forEach((e=>t({type:s.q.INIT_COMMENT,postId:e._id})))}),(e=>{console.log(e),t({type:n.A.GET_USERPROFILE_DATA_FAILURE}),t(u.I.error(e.toString()))}))}},getNewUsers:function(e){return t=>{e.initialFetch||t({type:n.A.GET_NEW_USERS_REQUEST}),o.getNewUsers(e).then((r=>{var s;t((s={...r,...e},{type:n.A.GET_NEW_USERS_SUCCESS,data:s}))}),(e=>{console.log(e)}))}},resetPassword:function(e){return r=>{r({type:n.A.PASSWORD_RESET_REQUEST}),o.resetPassword(e).then((e=>{r(u.I.success(e.message)),r(t())}),(e=>{r(u.I.error(e)),r(t())}))};function t(){return{type:n.A.PASSWORD_RESET_RESPONSE}}}}},85168:(e,t,r)=>{r.d(t,{Z:()=>o});r(72791);var n=r(91460),s=r(72898);function o(e){let{alert:{type:t,message:r}}=e;return"success"===t?(0,s.jsx)(n.Z,{success:!0,header:"Success",content:r}):"error"===t?(0,s.jsx)(n.Z,{error:!0,header:"Error",content:r}):null}},78417:(e,t,r)=>{r.d(t,{Z:()=>h});var n=r(72791),s=r(52007),o=r.n(s),a=r(92176),i=r.n(a),l=r(15151),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var p=function(e){function t(){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,o=Array(s),a=0;a<s;a++)o[a]=arguments[a];return r=n=c(this,e.call.apply(e,[this].concat(o))),n.handleClick=function(e){if(n.props.onClick&&n.props.onClick(e),!e.defaultPrevented&&0===e.button&&!n.props.target&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)){e.preventDefault();var t=n.context.router.history,r=n.props,s=r.replace,o=r.to;s?t.replace(o):t.push(o)}},c(n,r)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),r=e.innerRef,s=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["replace","to","innerRef"]);i()(this.context.router,"You should not use <Link> outside a <Router>"),i()(void 0!==t,'You must specify the "to" property');var o=this.context.router.history,a="string"===typeof t?(0,l.ob)(t,null,null,o.location):t,c=o.createHref(a);return n.createElement("a",u({},s,{onClick:this.handleClick,href:c,ref:r}))},t}(n.Component);p.propTypes={onClick:o().func,target:o().string,replace:o().bool,to:o().oneOfType([o().string,o().object]).isRequired,innerRef:o().oneOfType([o().string,o().func])},p.defaultProps={replace:!1},p.contextTypes={router:o().shape({history:o().shape({push:o().func.isRequired,replace:o().func.isRequired,createHref:o().func.isRequired}).isRequired}).isRequired};const h=p},91460:(e,t,r)=>{r.d(t,{Z:()=>b});var n=r(87462),s=r(15671),o=r(43144),a=r(82963),i=r(61120),l=r(60136),u=r(97326),c=r(4942),p=r(42854),h=r.n(p),d=(r(41761),r(81694)),f=r.n(d),g=r(72791),m=r(47826),y=r(76755),S=r(86246),E=r(65831),w=r(42879),T=r(62836);function O(e){var t=e.children,r=e.className,s=e.content,o=f()("content",r),a=(0,y.Z)(O,e),i=(0,S.Z)(O,e);return g.createElement(i,(0,n.Z)({},a,{className:o}),E.kK(t)?s:t)}O.handledProps=["as","children","className","content"],O.propTypes={};const P=O;function N(e){var t=e.children,r=e.className,s=e.content,o=f()("header",r),a=(0,y.Z)(N,e),i=(0,S.Z)(N,e);return g.createElement(i,(0,n.Z)({},a,{className:o}),E.kK(t)?s:t)}N.handledProps=["as","children","className","content"],N.propTypes={},N.create=(0,w.u5)(N,(function(e){return{content:e}}));const U=N;var R=r(72034),_=r.n(R);function I(e){var t=e.children,r=e.className,s=e.content,o=f()("content",r),a=(0,y.Z)(I,e),i=(0,S.Z)(I,e);return g.createElement(i,(0,n.Z)({},a,{className:o}),E.kK(t)?s:t)}I.handledProps=["as","children","className","content"],I.propTypes={},I.defaultProps={as:"li"},I.create=(0,w.u5)(I,(function(e){return{content:e}}));const v=I;function C(e){var t=e.children,r=e.className,s=e.items,o=f()("list",r),a=(0,y.Z)(C,e),i=(0,S.Z)(C,e);return g.createElement(i,(0,n.Z)({},a,{className:o}),E.kK(t)?_()(s,v.create):t)}C.handledProps=["as","children","className","items"],C.propTypes={},C.defaultProps={as:"ul"},C.create=(0,w.u5)(C,(function(e){return{items:e}}));const A=C;var b=function(e){function t(){var e,r;(0,s.Z)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return r=(0,a.Z)(this,(e=(0,i.Z)(t)).call.apply(e,[this].concat(o))),(0,c.Z)((0,u.Z)((0,u.Z)(r)),"handleDismiss",(function(e){var t=r.props.onDismiss;t&&t(e,r.props)})),r}return(0,l.Z)(t,e),(0,o.Z)(t,[{key:"render",value:function(){var e=this.props,r=e.attached,s=e.children,o=e.className,a=e.color,i=e.compact,l=e.content,u=e.error,c=e.floating,p=e.header,d=e.hidden,O=e.icon,N=e.info,R=e.list,_=e.negative,I=e.onDismiss,v=e.positive,C=e.size,b=e.success,Z=e.visible,j=e.warning,G=f()("ui",a,C,(0,m.lG)(i,"compact"),(0,m.lG)(u,"error"),(0,m.lG)(c,"floating"),(0,m.lG)(d,"hidden"),(0,m.lG)(O,"icon"),(0,m.lG)(N,"info"),(0,m.lG)(_,"negative"),(0,m.lG)(v,"positive"),(0,m.lG)(b,"success"),(0,m.lG)(Z,"visible"),(0,m.lG)(j,"warning"),(0,m.sU)(r,"attached"),"message",o),k=I&&g.createElement(T.Z,{name:"close",onClick:this.handleDismiss}),F=(0,y.Z)(t,this.props),x=(0,S.Z)(t,this.props);return E.kK(s)?g.createElement(x,(0,n.Z)({},F,{className:G}),k,T.Z.create(O,{autoGenerateKey:!1}),(!h()(p)||!h()(l)||!h()(R))&&g.createElement(P,null,U.create(p,{autoGenerateKey:!1}),A.create(R,{autoGenerateKey:!1}),(0,w.BU)(l,{autoGenerateKey:!1}))):g.createElement(x,(0,n.Z)({},F,{className:G}),k,s)}}]),t}(g.Component);(0,c.Z)(b,"Content",P),(0,c.Z)(b,"Header",U),(0,c.Z)(b,"List",A),(0,c.Z)(b,"Item",v),(0,c.Z)(b,"handledProps",["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"]),b.propTypes={}}}]);
//# sourceMappingURL=64.d6fe0fd1.chunk.js.map