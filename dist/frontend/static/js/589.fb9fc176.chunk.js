"use strict";(self.webpackChunksocial_network_client=self.webpackChunksocial_network_client||[]).push([[589],{78589:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var r=s(72791),n=s(72447),o=s(40834),a=s(66826),i=s(76915),c=s(85168),l=s(72898);class u extends r.Component{constructor(){super(...arguments),this.state={password:"",retypepassword:"",jwt:"",submitDisabled:!0},this.componentDidMount=()=>{document.title="Password reset | social-network",this.setState({jwt:this.props.match.params.jwt})},this.handleChange=e=>{const{name:t,value:s}=e.target;this.setState({[t]:s},(()=>{const{password:e,retypepassword:t}=this.state;e===t?this.setState({submitDisabled:!1}):this.setState({submitDisabled:!0})}))},this.handleSubmit=e=>{const{dispatch:t}=this.props,{password:s,retypepassword:r,jwt:n}=this.state;e.preventDefault(),t(i.h.resetPassword({password:s,retypepassword:r,jwt:n}))}}render(){const{alert:e,passwordReset:t}=this.props,{password:s,retypepassword:r,submitDisabled:a}=this.state,i="success"===e.type,u="error"===e.type;return(0,l.jsx)("div",{className:"container",children:(0,l.jsxs)(n.Z,{success:i,error:u,className:"fluid segment",size:"big",loading:!!t.requesting,onSubmit:this.handleSubmit,children:[(0,l.jsxs)(n.Z.Field,{children:[(0,l.jsx)("label",{children:"New password"}),(0,l.jsx)("input",{onChange:this.handleChange,name:"password",type:"password",placeholder:"New password",value:s})]}),(0,l.jsxs)(n.Z.Field,{children:[(0,l.jsx)("label",{children:"Re-type password"}),(0,l.jsx)("input",{onChange:this.handleChange,name:"retypepassword",type:"password",placeholder:"Re-type password",value:r})]}),(0,l.jsx)(o.Z,{disabled:a,fluid:!0,type:"submit",children:"Submit"}),(0,l.jsx)(c.Z,{alert:e})]})})}}const p=(0,a.$j)((e=>({passwordReset:e.passwordReset,alert:e.alert})))(u)},76915:(e,t,s)=>{s.d(t,{h:()=>p});var r=s(51935),n=s(73685);const o={login:function(e,t){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})};return fetch("/api/user/login",s).then(i).then((e=>(localStorage.setItem("user",JSON.stringify({token:e.user.token})),e.user)))},logout:a,sendVerificationEmail:function(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})};return fetch("/api/user/sendVerificationEmail/",t).then(i)},sendforgotPasswordEmail:function(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})};return fetch("/api/user/sendforgotPasswordEmail/",t).then(i)},register:function(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/user/signup/",t).then(i)},getUserData:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({...e})};return fetch("/api/user/getUserData",t).then(i).then((e=>e))},resetPassword:function(e){const t={method:"POST",headers:{Authorization:"Bearer "+e.jwt,"Content-Type":"application/json"},body:JSON.stringify({...e})};return fetch("/api/user/passwordreset",t).then(c).then((e=>e))},updateUser:function(e){delete e.isDisabled;const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/user/updateUser",t).then(i).then((e=>(localStorage.setItem("user",JSON.stringify({token:e.token})),e)))},followUser:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({userId:e})};return fetch("/api/user/followUser",t).then(i).then((e=>e))},getUserProfileData:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({username:e.trim(),profilePage:!0})};return fetch("/api/user/getProfilePageData",t).then(i).then((e=>e))},getPosts:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({...e})};return fetch("/api/user/getPosts",t).then(i).then((e=>e))},getUserProfileFollowers:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({userId:e})};return fetch("/api/user/getUserProfileFollowers",t).then(i).then((e=>e))},getUserProfileFollowings:function(e){const t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({userId:e})};return fetch("/api/user/getUserProfileFollowings",t).then(i).then((e=>e))},getNewUsers:function(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})};return fetch("/api/user/getNewUsers",t).then(i).then((e=>e))}};function a(){localStorage.removeItem("user")}function i(e){return e.text().then((t=>{const s=t&&JSON.parse(t);if(!e.ok){401===e.status&&(a(),window.location.reload(!0));const t=s&&s.message||e.statusText;return Promise.reject(t)}return s}))}function c(e){return e.text().then((t=>{const s=t&&JSON.parse(t);if(!e.ok){e.status;const t=s&&s.message||e.statusText;return Promise.reject(t)}return s}))}var l=s(44102),u=s(74325);const p={login:function(e,t){return s=>{var n;s((n={email:e},{type:r.A.LOGIN_REQUEST,user:n})),o.login(e,t).then((e=>{s(function(e){return{type:r.A.LOGIN_SUCCESS,user:e}}(e.token)),s({type:r.A.GETUSER_SUCCESS,user:e}),u.m.push("/")}),(e=>{s(function(e){return{type:r.A.LOGIN_FAILURE,error:e}}(e.toString())),s(l.I.error(e.toString()))}))}},logout:function(){return o.logout(),e=>{e({type:r.A.LOGOUT})}},register:function(e){return t=>{t(function(e){return{type:r.A.REGISTER_REQUEST,user:e}}(e)),o.register(e).then((e=>{t(function(e){return{type:r.A.REGISTER_SUCCESS,user:e}}()),u.m.push("/login"),t(l.I.success(e.message))}),(e=>{t(function(e){return{type:r.A.REGISTER_FAILURE,error:e}}(e.toString())),t(l.I.error(e.toString()))}))}},sendVerificationEmail:function(e){return t=>{o.sendVerificationEmail(e).then((e=>{t(l.I.success(e.message))}),(e=>{t(l.I.error(e))}))}},getUserData:function(e){return t=>{t({type:r.A.GETUSER_REQUEST}),o.getUserData(e).then((e=>{var s;e.user.posts&&e.user.posts.forEach((e=>t({type:n.q.INIT_COMMENT,postId:e._id}))),t((s=e.user,{type:r.A.GETUSER_SUCCESS,user:s}))}),(e=>{t(function(e){return{type:r.A.GETUSER_FAILURE,error:e}}(e.toString())),t(l.I.error(e.toString()))}))}},getUserProfileFollowers:function(e){return t=>{o.getUserProfileFollowers(e).then((e=>{var s;t((s=e.users[0].followers,{type:r.A.GET_USER_PROFILE_FOLLOWERS,users:s}))}),(e=>{console.log(e)}))}},getUserProfileFollowings:function(e){return t=>{o.getUserProfileFollowings(e).then((e=>{var s;t((s=e.users[0].following,{type:r.A.GET_USER_PROFILE_FOLLOWINGS,users:s}))}),(e=>{console.log(e)}))}},getFollowers:function(e){return t=>{o.getUserProfileFollowers(e).then((e=>{var s;t((s=e.users[0].followers,{type:r.A.GET_USER_FOLLOWERS,users:s}))}),(e=>{console.log(e)}))}},getPosts:function(e){return t=>{o.getPosts(e).then((e=>{var s;e.posts.forEach((e=>t({type:n.q.INIT_COMMENT,postId:e._id}))),t((s=e.posts,{type:r.A.GET_POSTS,posts:s}))}),(e=>{t(l.I.error(e))}))}},getUserPosts:function(e){return t=>{o.getPosts(e).then((e=>{var s;e.posts.forEach((e=>t({type:n.q.INIT_COMMENT,postId:e._id}))),t((s=e.posts,{type:r.A.GET_USER_PROFILE_POSTS,posts:s}))}),(e=>{t(l.I.error(e))}))}},getFollowings:function(e){return t=>{o.getUserProfileFollowings(e).then((e=>{var s;t((s=e.users[0].following,{type:r.A.GET_USER_FOLLOWINGS,users:s}))}),(e=>{console.log(e)}))}},updateUserData:function(e){return t=>{t({type:r.A.USER_UPDATE_REQUEST}),o.updateUser(e).then((e=>{t(function(e){return{type:r.A.USER_UPDATE_SUCCESS,user:e}}(e.user))}),(e=>{t(function(e){return{type:r.A.USER_UPDATE_FAILURE,error:e}}(e.toString()))}))}},followUser:function(e){return t=>{o.followUser(e).then((e=>{"followed"===e.action?t({type:r.A.FOLLOW_USER,user:e}):t({type:r.A.UNFOLLOW_USER,user:e})}),(e=>{console.log(e)}))}},sendforgotPasswordEmail:function(e){return t=>{o.sendforgotPasswordEmail(e).then((e=>{t(l.I.success(e.message))}),(e=>{t(l.I.error(e))}))}},getUserProfileData:function(e){return t=>{t({type:r.A.GET_USERPROFILE_DATA_REQUEST}),o.getUserProfileData(e).then((e=>{if(e.user.loggedInUser)return u.m.push("/profile");var s;document.title="@"+e.user.username+" | social-network",t((s=e,{type:r.A.GET_USERPROFILE_DATA,user:s})),e.user.posts&&e.user.posts.forEach((e=>t({type:n.q.INIT_COMMENT,postId:e._id})))}),(e=>{console.log(e),t({type:r.A.GET_USERPROFILE_DATA_FAILURE}),t(l.I.error(e.toString()))}))}},getNewUsers:function(e){return t=>{e.initialFetch||t({type:r.A.GET_NEW_USERS_REQUEST}),o.getNewUsers(e).then((s=>{var n;t((n={...s,...e},{type:r.A.GET_NEW_USERS_SUCCESS,data:n}))}),(e=>{console.log(e)}))}},resetPassword:function(e){return s=>{s({type:r.A.PASSWORD_RESET_REQUEST}),o.resetPassword(e).then((e=>{s(l.I.success(e.message)),s(t())}),(e=>{s(l.I.error(e)),s(t())}))};function t(){return{type:r.A.PASSWORD_RESET_RESPONSE}}}}},85168:(e,t,s)=>{s.d(t,{Z:()=>o});s(72791);var r=s(91460),n=s(72898);function o(e){let{alert:{type:t,message:s}}=e;return"success"===t?(0,n.jsx)(r.Z,{success:!0,header:"Success",content:s}):"error"===t?(0,n.jsx)(r.Z,{error:!0,header:"Error",content:s}):null}},91460:(e,t,s)=>{s.d(t,{Z:()=>Z});var r=s(87462),n=s(15671),o=s(43144),a=s(82963),i=s(61120),c=s(60136),l=s(97326),u=s(4942),p=s(42854),d=s.n(p),h=(s(41761),s(81694)),f=s.n(h),g=s(72791),S=s(47826),m=s(76755),E=s(86246),y=s(65831),w=s(42879),T=s(62836);function U(e){var t=e.children,s=e.className,n=e.content,o=f()("content",s),a=(0,m.Z)(U,e),i=(0,E.Z)(U,e);return g.createElement(i,(0,r.Z)({},a,{className:o}),y.kK(t)?n:t)}U.handledProps=["as","children","className","content"],U.propTypes={};const O=U;function P(e){var t=e.children,s=e.className,n=e.content,o=f()("header",s),a=(0,m.Z)(P,e),i=(0,E.Z)(P,e);return g.createElement(i,(0,r.Z)({},a,{className:o}),y.kK(t)?n:t)}P.handledProps=["as","children","className","content"],P.propTypes={},P.create=(0,w.u5)(P,(function(e){return{content:e}}));const N=P;var _=s(72034),I=s.n(_);function R(e){var t=e.children,s=e.className,n=e.content,o=f()("content",s),a=(0,m.Z)(R,e),i=(0,E.Z)(R,e);return g.createElement(i,(0,r.Z)({},a,{className:o}),y.kK(t)?n:t)}R.handledProps=["as","children","className","content"],R.propTypes={},R.defaultProps={as:"li"},R.create=(0,w.u5)(R,(function(e){return{content:e}}));const A=R;function v(e){var t=e.children,s=e.className,n=e.items,o=f()("list",s),a=(0,m.Z)(v,e),i=(0,E.Z)(v,e);return g.createElement(i,(0,r.Z)({},a,{className:o}),y.kK(t)?I()(n,A.create):t)}v.handledProps=["as","children","className","items"],v.propTypes={},v.defaultProps={as:"ul"},v.create=(0,w.u5)(v,(function(e){return{items:e}}));const C=v;var Z=function(e){function t(){var e,s;(0,n.Z)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return s=(0,a.Z)(this,(e=(0,i.Z)(t)).call.apply(e,[this].concat(o))),(0,u.Z)((0,l.Z)((0,l.Z)(s)),"handleDismiss",(function(e){var t=s.props.onDismiss;t&&t(e,s.props)})),s}return(0,c.Z)(t,e),(0,o.Z)(t,[{key:"render",value:function(){var e=this.props,s=e.attached,n=e.children,o=e.className,a=e.color,i=e.compact,c=e.content,l=e.error,u=e.floating,p=e.header,h=e.hidden,U=e.icon,P=e.info,_=e.list,I=e.negative,R=e.onDismiss,A=e.positive,v=e.size,Z=e.success,G=e.visible,b=e.warning,j=f()("ui",a,v,(0,S.lG)(i,"compact"),(0,S.lG)(l,"error"),(0,S.lG)(u,"floating"),(0,S.lG)(h,"hidden"),(0,S.lG)(U,"icon"),(0,S.lG)(P,"info"),(0,S.lG)(I,"negative"),(0,S.lG)(A,"positive"),(0,S.lG)(Z,"success"),(0,S.lG)(G,"visible"),(0,S.lG)(b,"warning"),(0,S.sU)(s,"attached"),"message",o),F=R&&g.createElement(T.Z,{name:"close",onClick:this.handleDismiss}),k=(0,m.Z)(t,this.props),D=(0,E.Z)(t,this.props);return y.kK(n)?g.createElement(D,(0,r.Z)({},k,{className:j}),F,T.Z.create(U,{autoGenerateKey:!1}),(!d()(p)||!d()(c)||!d()(_))&&g.createElement(O,null,N.create(p,{autoGenerateKey:!1}),C.create(_,{autoGenerateKey:!1}),(0,w.BU)(c,{autoGenerateKey:!1}))):g.createElement(D,(0,r.Z)({},k,{className:j}),F,n)}}]),t}(g.Component);(0,u.Z)(Z,"Content",O),(0,u.Z)(Z,"Header",N),(0,u.Z)(Z,"List",C),(0,u.Z)(Z,"Item",A),(0,u.Z)(Z,"handledProps",["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"]),Z.propTypes={}}}]);
//# sourceMappingURL=589.fb9fc176.chunk.js.map