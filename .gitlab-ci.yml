stages:
  #- install
  #- lint
  #- document
  #- build
  - deploy

# cache:
#   paths:
#     - node_modules/
#     - client/node_modules/

# install-job:
#   stage: install
#   script:
#     - npm ci
#     - cd ./client
#     - npm ci

# lint-job:
#   stage: lint
#   script:
#     - echo "Linting..."
#     - npm run lint
#   artifacts:
#     name: "lint"
#     paths:
#       - ./lintArtifact/eslint-report.html
#     untracked: true
#     when: on_success

# doc-job:
#   stage: document
#   script:
#     - echo "Documenting..."
#     - npm run doc
#   artifacts:
#     name: "document"
#     paths:
#       - ./docs/docArtifact
#     untracked: true
#     when: on_success

# build-job:
#   stage: build
#   script: 
#     - echo "Building..."
#     - npm run build
#     - npm run bundle
#   artifacts:
#     name: "build"
#     paths:
#       - ./
#     untracked: true

deploy-job:
  stage: deploy
  before_script:
    - apt-get install -y awscli  # Install AWS CLI
    - aws --version  # Print AWS CLI version for debugging
  script: 
    - aws configure set aws_access_key_id $AWS_ACCESS_KEY_ID
    - aws configure set aws_secret_access_key $AWS_SECRET_ACCESS_KEY
    - aws configure list  # Print AWS CLI configuration for debugging
    - npm run deploy
  